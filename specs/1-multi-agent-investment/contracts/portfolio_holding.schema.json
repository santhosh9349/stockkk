{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://alpha-agent-2026/schemas/portfolio_holding.json",
  "title": "PortfolioHolding",
  "description": "A current portfolio position with health analysis",
  "type": "object",
  "required": ["symbol", "shares", "cost_basis", "entry_date"],
  "properties": {
    "symbol": {
      "type": "string",
      "minLength": 1,
      "maxLength": 10
    },
    "shares": {
      "type": "number",
      "exclusiveMinimum": 0
    },
    "cost_basis": {
      "type": "number",
      "exclusiveMinimum": 0,
      "description": "Average cost per share"
    },
    "entry_date": {
      "type": "string",
      "format": "date"
    },
    "current_price": {
      "type": ["number", "null"]
    },
    "sma_20": {
      "type": ["number", "null"],
      "description": "20-day simple moving average"
    },
    "pct_vs_sma": {
      "type": ["number", "null"],
      "description": "Percentage deviation from 20-day SMA"
    },
    "position_pct": {
      "type": ["number", "null"],
      "description": "Position as percentage of total portfolio"
    },
    "pnl_pct": {
      "type": ["number", "null"],
      "description": "Unrealized P&L percentage"
    },
    "sentiment_score": {
      "type": ["number", "null"],
      "minimum": -1,
      "maximum": 1
    },
    "signal": {
      "type": ["string", "null"],
      "enum": ["EXIT", "HEDGE", "TOP_UP", "HOLD", null]
    },
    "rationale": {
      "type": ["string", "null"]
    }
  }
}
